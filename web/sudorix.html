<!doctype html>
<html lang="eo">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script type="text/javascript" src="solver_wasm.js"></script>
  <script type="text/javascript" src="sudorix.js"></script>
  <link rel="stylesheet" href="sudorix.css"></link>
  <title>Sudorix</title>
</head>
<body>
<header>
  <h1>Sudorix - Sudokua Logika Solvilo el Fiorix</h1>
</header>

<div class="layout">
  <div class="panel">
    <h2>Enporto</h2>
    <textarea id="importText" placeholder="Algluu ĉenon de 81 ciferoj. Por indiki malplenajn ĉelojn uzu 0 aŭ '.'."></textarea>

    <div class="optRow">
      <label><input type="checkbox" id="optPrefill" /> Antaŭplenigo</label>
      <label><input type="checkbox" id="optAutoClear" /> Aŭtomata forigo</label>
      <label><input type="checkbox" id="optHighlight" /> Emfazo</label>
    </div>

    <div class="row">
      <button id="btnImport" class="ok">Enporti Sudokuon</button>
      <button id="btnClear" class="danger">Reagordi kradon</button>
      <button id="btnRecalc" class="secondary">Rekalkuli kandidatojn</button>
      <button id="btnCheck" class="secondary">Kontroli</button>
    </div>

    <h2 style="margin-top: 14px;">Protokolo</h2>
    <textarea id="log" class="logArea" readonly placeholder="La solvilo skribos ĉi tie la paŝojn (ekz. 'Naked single: r3c7 = 8')."></textarea>
    <div class="row">
      <button id="btnClearLog" class="secondary">Viŝi protokolon</button>
      <button id="btnDemoStep" class="secondary">Ruli 1 paŝon (demo)</button>
    </div>

    <div class="row" style="margin-top: 12px;">
      <button id="btnSolve" class="ok">Komenci solvadon</button>
      <button id="btnSolveWasmFull" class="secondary">WASM plen-solve</button>
      <button id="btnStop" class="secondary">Halti</button>
    </div>
  </div>

  <div class="panel gridPanel">
    <h2>Krado</h2>
    <div class="sudoku" id="sudokuGrid" aria-label="Sudoku-krado"></div>

    <!-- TIMER UNDER GRID -->
    <div class="timerBar" aria-label="Tempomezurilo">
      <div class="timerText" id="timerText">00:00</div>
      <div class="pauseBtn" id="btnPause" title="Paŭzo">
        <div class="pauseIcon" aria-hidden="true"></div>
      </div>
    </div>
  </div>

  <div class="panel">
    <h2>Enigo / Kolorigado</h2>
    <div class="modeBar">
      <button id="modeValue" class="toggled">Valoro</button>
      <button id="modeCand" class="secondary">Kandidato</button>
      <button id="modeColor" class="secondary">Kolorigado</button>
    </div>

    <div id="digitPad" class="pad3x3"></div>
    <div id="colorPad" class="pad3x3 hidden"></div>

    <div class="helpBox">
      Fulmoklavoj:<br/>
      - <b>Numpad .</b>: ŝanĝi Valoro/Kandidato (nur en Valoro/Kandidato)<br/>
      - <b>Frecce</b>: navigado inter ĉeloj<br/>
      - <b>1–9</b>: (Valoro) agordi/ŝalti valoron; (Kandidato) ŝalti kandidaton<br/>
      - <b>Del/Backspace/0</b>: forigi valoron (nur en Valoro)<br/>
      - <b>Highlight</b>: kun ŝaltita markobutono, alklaku solvitajn ĉelojn (en Valoro/Kandidato) por emfazi numeron<br/>
      - <b>Kolorigado</b>: alklaku ĉelon/kandidaton por ŝalti koloron
    </div>
  </div>
</div>

<!-- Modalo: rezulto de kontrolo / eraroj -->
<div class="modalOverlay" id="modalOverlayCheck" role="dialog" aria-modal="true" aria-labelledby="modalTitleCheck">
  <div class="modal">
    <h3 id="modalTitleCheck">Rezulto</h3>
    <p class="msg" id="modalMsgCheck"></p>
    <div class="modalRow">
      <button id="btnModalOkCheck" class="ok">Ok</button>
    </div>
  </div>
</div>

<!-- Modalo: paŭzo -->
<div class="modalOverlay" id="modalOverlayPause" role="dialog" aria-modal="true" aria-labelledby="modalTitlePause">
  <div class="modal">
    <h3 id="modalTitlePause">Paŭzo</h3>
    <p class="msg" id="modalMsgPause">Alklaku Ok por daŭrigi.</p>
    <div class="modalRow">
      <button id="btnModalOkPause" class="ok">Ok</button>
    </div>
  </div>
</div>

<script>
  business_logic();
</script>
</body>
</html>
